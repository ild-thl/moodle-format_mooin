define("format_mooin4/modalGenerator",["exports","core/modal_factory","core/url","format_mooin4/mooin4Modal","core/str"],(function(_exports,_modal_factory,_url,_mooin4Modal,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modal_factory=_interopRequireDefault(_modal_factory),_url=_interopRequireDefault(_url),_mooin4Modal=_interopRequireDefault(_mooin4Modal);function _showModal(){return(_showModal=_asyncToGenerator(regeneratorRuntime.mark((function _callee(data){var footerContent;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!data.show_chapter_modal){_context.next=44;break}if(document.querySelector('[data-key="'.concat(data.chapter_id,'"]')).classList.add("completed"),footerContent="",!(data.next_chapter<0)){_context.next=13;break}return _context.t0='<button type="button" class="mooin4-btn mooin4-btn-special"data-action="hide">',_context.next=8,(0,_str.get_string)("close","format_mooin4");case 8:_context.t1=_context.sent,_context.t2=_context.t0+_context.t1,footerContent=_context.t2+'<i class="bi bi-x-circle-fill"></i></button>',_context.next=28;break;case 13:return _context.t3='<button type="button" class="mooin4-btn mooin4-btn-special"data-action="hide">',_context.next=16,(0,_str.get_string)("close","format_mooin4");case 16:return _context.t4=_context.sent,_context.t5=_context.t3+_context.t4,_context.t6=_context.t5+'<i class="bi bi-x-circle-fill"></i></button>',_context.t7=_context.t6+'<a href="',_context.t8=_url.default.relativeUrl("/course/view.php",{id:data.course_id,section:data.next_chapter}),_context.t9=_context.t7+_context.t8,_context.t10=_context.t9+'" class="mooin4-btn mooin4-btn-primary">',_context.next=25,(0,_str.get_string)("next_chapter","format_mooin4");case 25:_context.t11=_context.sent,_context.t12=_context.t10+_context.t11,footerContent=_context.t12+"</a>";case 28:return _context.t13=_modal_factory.default,_context.next=31,(0,_str.get_string)("modal_chapter_complete_title","format_mooin4");case 31:return _context.t14=_context.sent,_context.next=34,(0,_str.get_string)("modal_chapter_complete","format_mooin4");case 34:return _context.t15=_context.sent,_context.t16="<p>"+_context.t15,_context.t17=_context.t16+'</p><i class="bi bi-check-circle"></i>',_context.t18=footerContent,_context.t19=_mooin4Modal.default.TYPE,_context.t20={title:_context.t14,body:_context.t17,footer:_context.t18,type:_context.t19,scrollable:!1},_context.next=42,_context.t13.create.call(_context.t13,_context.t20);case 42:_context.sent.show();case 44:if(!data.show_course_modal){_context.next=68;break}return document.querySelector('[data-key="'.concat(data.chapter_id,'"]')).classList.add("completed"),_context.t21=_modal_factory.default,_context.next=50,(0,_str.get_string)("modal_course_complete_title","format_mooin4");case 50:return _context.t22=_context.sent,_context.next=53,(0,_str.get_string)("modal_course_complete","format_mooin4");case 53:return _context.t23=_context.sent,_context.t24="<p>"+_context.t23,_context.t25=_context.t24+'</p><i class="bi bi-mortarboard-fill"></i>',_context.t26='<button type="button" class="mooin4-btn mooin4-btn-special"data-action="hide">',_context.next=59,(0,_str.get_string)("close","format_mooin4");case 59:return _context.t27=_context.sent,_context.t28=_context.t26+_context.t27,_context.t29=_context.t28+'<i class="bi bi-x-circle-fill"></i></button>',_context.t30=_mooin4Modal.default.TYPE,_context.t31={title:_context.t22,body:_context.t25,footer:_context.t29,type:_context.t30,scrollable:!1},_context.next=66,_context.t21.create.call(_context.t21,_context.t31);case 66:_context.sent.show();case 68:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}_exports.init=function(){window.addEventListener("message",(function(event){var message=event.data;"showModal"===message.action&&(!function(_x){_showModal.apply(this,arguments)}(message.modal.data),this.window.console.log(message.modal))}))}}));

//# sourceMappingURL=modalGenerator.min.js.map
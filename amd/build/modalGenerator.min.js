define("format_mooin4/modalGenerator",["exports","core/modal_factory","core/url","format_mooin4/mooin4Modal"],(function(_exports,_modal_factory,_url,_mooin4Modal){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modal_factory=_interopRequireDefault(_modal_factory),_url=_interopRequireDefault(_url),_mooin4Modal=_interopRequireDefault(_mooin4Modal);function _showModal(){return(_showModal=_asyncToGenerator(regeneratorRuntime.mark((function _callee(data){var footerContent;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(this.window.console.log("showmodal aufgerufen"),!data.show_chapter_modal){_context.next=11;break}return this.window.console.log("chaptermodal aufgerufen"),document.querySelector('[data-key="'.concat(data.chapter_id,'"]')).classList.add("completed"),footerContent="",footerContent=data.next_chapter<0?'<button type="button" class="mooin4-btn mooin4-btn-special"data-action="hide">Schließen<i class="bi bi-x-circle-fill"></i></button>':'<button type="button" class="mooin4-btn mooin4-btn-special"data-action="hide">Schließen<i class="bi bi-x-circle-fill"></i></button><a href="'+_url.default.relativeUrl("/course/view.php",{id:data.course_id,section:data.next_chapter})+'" class="mooin4-btn mooin4-btn-primary">Nächstes Kapitel</a>',_context.next=9,_modal_factory.default.create({title:"Kapitel vollständig bearbeitet",body:'<p>Du hast alle Lektionen in diesem Kapitel bearbeitet!</p><i class="bi bi-check-circle"></i>',footer:footerContent,type:_mooin4Modal.default.TYPE,scrollable:!1});case 9:_context.sent.show();case 11:if(!data.show_course_modal){_context.next=18;break}return document.querySelector('[data-key="'.concat(data.chapter_id,'"]')).classList.add("completed"),_context.next=16,_modal_factory.default.create({title:"Kurs vollständig bearbeitet",body:'<p>Du hast alle Lektionen in diesem Kurs bearbeitet!</p><i class="bi bi-mortarboard-fill"></i>',footer:'<button type="button" class="mooin4-btn mooin4-btn-special"data-action="hide">Schließen<i class="bi bi-x-circle-fill"></i></button>',type:_mooin4Modal.default.TYPE,scrollable:!1});case 16:_context.sent.show();case 18:case"end":return _context.stop()}}),_callee,this)})))).apply(this,arguments)}_exports.init=function(){window.addEventListener("message",(function(event){var message=event.data;"showModal"===message.action&&(!function(_x){_showModal.apply(this,arguments)}(message.modal.data),this.window.console.log(message.modal))}))}}));

//# sourceMappingURL=modalGenerator.min.js.map
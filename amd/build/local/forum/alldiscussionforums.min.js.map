{"version":3,"file":"alldiscussionforums.min.js","sources":["../../../src/local/forum/alldiscussionforums.js"],"sourcesContent":["import {BaseComponent} from 'core/reactive';\nimport {getCurrentCourseEditor} from 'core_courseformat/courseeditor';\nimport CustomMutations from '../courseeditor/custommutations';\n\nexport default class Component extends BaseComponent {\n\n    create() {\n        this.name = 'alldiscussionforums';\n       \n        this.selectors = {\n            UNREADLINK: `[data-for='unread_link']`, \n            UNREADCONTAINER: `[data-for='mark_as_read_container']`,\n        };\n    }\n\n    static init(target, selectors) {\n        return new Component({\n            element: document.getElementById(target),\n            reactive: getCurrentCourseEditor(),\n            selectors,\n        });\n    }\n\n    stateReady(state) {\n        const unreadlinks = this.getElements(this.selectors.UNREADLINK);\n        unreadlinks.forEach(link => {\n            link.addEventListener('click', this._unreadForum.bind(this));\n        });\n        window.console.log(unreadlinks);\n        const mutations = new CustomMutations();\n        this.reactive.addMutations({\n            readAllForumDiscussions: mutations.readAllForumDiscussions\n          });\n    }\n\n    _unreadForum(event) {\n        const unreadLink = event.currentTarget;\n        const dataId = unreadLink.getAttribute('data-id');\n        this.reactive.dispatch(\"readAllForumDiscussions\", dataId);\n\n        const unreadContainer = unreadLink.closest(this.selectors.UNREADCONTAINER);\n        if (unreadContainer) {\n            unreadContainer.remove();\n        }\n    }\n}"],"names":["Component","BaseComponent","create","name","selectors","UNREADLINK","UNREADCONTAINER","target","element","document","getElementById","reactive","stateReady","state","unreadlinks","this","getElements","forEach","link","addEventListener","_unreadForum","bind","window","console","log","mutations","CustomMutations","addMutations","readAllForumDiscussions","event","unreadLink","currentTarget","dataId","getAttribute","dispatch","unreadContainer","closest","remove"],"mappings":"2XAIqBA,kBAAkBC,wBAEnCC,cACSC,KAAO,2BAEPC,UAAY,CACbC,WAAa,2BACbC,gBAAkB,mDAIdC,OAAQH,kBACT,IAAIJ,UAAU,CACjBQ,QAASC,SAASC,eAAeH,QACjCI,UAAU,0CACVP,UAAAA,YAIRQ,WAAWC,aACDC,YAAcC,KAAKC,YAAYD,KAAKX,UAAUC,YACpDS,YAAYG,SAAQC,OAChBA,KAAKC,iBAAiB,QAASJ,KAAKK,aAAaC,KAAKN,UAE1DO,OAAOC,QAAQC,IAAIV,mBACbW,UAAY,IAAIC,8BACjBf,SAASgB,aAAa,CACvBC,wBAAyBH,UAAUG,0BAI3CR,aAAaS,aACHC,WAAaD,MAAME,cACnBC,OAASF,WAAWG,aAAa,gBAClCtB,SAASuB,SAAS,0BAA2BF,cAE5CG,gBAAkBL,WAAWM,QAAQrB,KAAKX,UAAUE,iBACtD6B,iBACAA,gBAAgBE"}

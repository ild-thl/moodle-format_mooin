{"version":3,"file":"modalGenerator.min.js","sources":["../src/modalGenerator.js"],"sourcesContent":["import ModalFactory from \"core/modal_factory\";\nimport Url from \"core/url\";\nimport Mooin4Modal from \"format_mooin4/mooin4Modal\";\nimport { get_string as getString } from \"core/str\";\n\n/**\n *\n */\nexport const init = () => {\n  window.addEventListener('message', function(event) {\n    var message = event.data;\n    if (message.action === 'showModal') {\n      showModal(message.modal.data);\n      this.window.console.log(message.modal);\n    }\n  });\n};\n\n/**\n * Data from ajax request\n * @param {*} data\n */\n async function showModal(data) {\n  if (data.show_chapter_modal) {\n    let navdrawerChapter = document.querySelector(\n      `[data-key=\"${data.chapter_id}\"]`\n    );\n    navdrawerChapter.classList.add(\"completed\");\n    var footerContent = \"\";\n    if (data.next_chapter < 0) {\n       footerContent =\n        '<button type=\"button\" class=\"mooin4-btn mooin4-btn-special\"' +\n        'data-action=\"hide\">' + await getString(\"close\", \"format_mooin4\") + '<i class=\"bi bi-x-circle-fill\"></i></button>';\n    } else {\n      footerContent =\n        '<button type=\"button\" class=\"mooin4-btn mooin4-btn-special\"' +\n        'data-action=\"hide\">' + await getString(\"close\", \"format_mooin4\") + '<i class=\"bi bi-x-circle-fill\"></i></button>' +\n        '<a href=\"' +\n        Url.relativeUrl(\"/course/view.php\", {\n          id: data.course_id,\n          section: data.next_chapter,\n        }) +\n        '\" class=\"mooin4-btn mooin4-btn-primary\">' + await getString(\"next_chapter\", \"format_mooin4\") + '</a>';\n    }\n      const modal = await ModalFactory.create({\n      title: await getString(\"modal_chapter_complete_title\", \"format_mooin4\"),\n      body: '<p>' + await getString(\"modal_chapter_complete\", \"format_mooin4\") + '</p><i class=\"bi bi-check-circle\"></i>',\n      footer: footerContent,\n      type: Mooin4Modal.TYPE,\n      scrollable: false,\n    });\n    modal.show();\n  }\n  if (data.show_course_modal) {\n    let navdrawerChapter = document.querySelector(\n      `[data-key=\"${data.chapter_id}\"]`\n    );\n    navdrawerChapter.classList.add(\"completed\");\n      const modal = await ModalFactory.create({\n      title: await getString(\"modal_course_complete_title\", \"format_mooin4\"),\n      body: '<p>' + await getString(\"modal_course_complete\", \"format_mooin4\") + '</p><i class=\"bi bi-mortarboard-fill\"></i>',\n      footer:\n        '<button type=\"button\" class=\"mooin4-btn mooin4-btn-primary\"' +\n        'data-action=\"hide\">' + await getString(\"close\", \"format_mooin4\") + '<i class=\"bi bi-x-circle-fill\"></i></button>',\n      type: Mooin4Modal.TYPE,\n      scrollable: false,\n    });\n    modal.show();\n  }\n}"],"names":["data","show_chapter_modal","document","querySelector","chapter_id","classList","add","footerContent","next_chapter","Url","relativeUrl","id","course_id","section","ModalFactory","Mooin4Modal","TYPE","title","body","footer","type","scrollable","create","show","show_course_modal","window","addEventListener","event","message","action","showModal","modal","console","log"],"mappings":"+lCAsBC,iBAAyBA,iIACpBA,KAAKC,8CACgBC,SAASC,mCAChBH,KAAKI,kBAEJC,UAAUC,IAAI,aAC3BC,cAAgB,KAChBP,KAAKQ,aAAe,8CAEpB,kGAC8B,mBAAU,QAAS,sFAFlDD,0BAEqE,iGAGpE,mGAC8B,mBAAU,QAAS,sHAAmB,uEACpE,wBACAE,aAAIC,YAAY,mBAAoB,CAClCC,GAAIX,KAAKY,UACTC,QAASb,KAAKQ,4EAEhB,6DAAmD,mBAAU,eAAgB,2FAR/ED,2BAQkG,mCAE9EO,yCACP,mBAAU,+BAAgC,6EACnC,mBAAU,yBAA0B,wEAAlD,6CAAqE,sDACnEP,2BACFQ,qBAAYC,mBAHlBC,mBACAC,kBACAC,oBACAC,kBACAC,YAAY,iCALqBC,6DAO7BC,mBAEJvB,KAAKwB,iDACgBtB,SAASC,mCAChBH,KAAKI,kBAEJC,UAAUC,IAAI,0BACTQ,yCACP,mBAAU,8BAA+B,6EAClC,mBAAU,wBAAyB,wEAAjD,6CAAoE,0DAExE,mGAC8B,mBAAU,QAAS,4HAAmB,4DAChEC,qBAAYC,mBALlBC,mBACAC,kBACAC,oBAGAC,kBACAC,YAAY,iCAPqBC,6DAS7BC,qGA3DU,WAClBE,OAAOC,iBAAiB,WAAW,SAASC,WACtCC,QAAUD,MAAM3B,KACG,cAAnB4B,QAAQC,wDACVC,CAAUF,QAAQG,MAAM/B,WACnByB,OAAOO,QAAQC,IAAIL,QAAQG"}
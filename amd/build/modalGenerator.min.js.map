{"version":3,"file":"modalGenerator.min.js","sources":["../src/modalGenerator.js"],"sourcesContent":["import ModalFactory from \"core/modal_factory\";\nimport Url from \"core/url\";\nimport Mooin4Modal from \"format_mooin4/mooin4Modal\";\n\n/**\n *\n */\nexport const init = () => {\n  window.addEventListener('message', function(event) {\n    var message = event.data;\n    if (message.action === 'showModal') {\n      showModal(message.modal.data);\n      this.window.console.log(message.modal);\n    }\n  });\n};\n\n/**\n * Data from ajax request\n * @param {*} data\n */\n async function showModal(data) {\n  this.window.console.log('showmodal aufgerufen');\n  if (data.show_chapter_modal) {\n    this.window.console.log('chaptermodal aufgerufen');\n    let navdrawerChapter = document.querySelector(\n      `[data-key=\"${data.chapter_id}\"]`\n    );\n    navdrawerChapter.classList.add(\"completed\");\n    var footerContent = \"\";\n    if (data.next_chapter < 0) {\n       footerContent =\n        '<button type=\"button\" class=\"mooin4-btn mooin4-btn-special\"' +\n        'data-action=\"hide\">Schließen<i class=\"bi bi-x-circle-fill\"></i></button>';\n    } else {\n      footerContent =\n        '<button type=\"button\" class=\"mooin4-btn mooin4-btn-special\"' +\n        'data-action=\"hide\">Schließen<i class=\"bi bi-x-circle-fill\"></i></button>' +\n        '<a href=\"' +\n        Url.relativeUrl(\"/course/view.php\", {\n          id: data.course_id,\n          section: data.next_chapter,\n        }) +\n        '\" class=\"mooin4-btn mooin4-btn-primary\">Nächstes Kapitel</a>';\n    }\n      const modal = await ModalFactory.create({\n      title: \"Kapitel vollständig bearbeitet\",\n      body: '<p>Du hast alle Lektionen in diesem Kapitel bearbeitet!</p><i class=\"bi bi-check-circle\"></i>',\n      footer: footerContent,\n      type: Mooin4Modal.TYPE,\n      scrollable: false,\n    });\n    modal.show();\n  }\n  if (data.show_course_modal) {\n    let navdrawerChapter = document.querySelector(\n      `[data-key=\"${data.chapter_id}\"]`\n    );\n    navdrawerChapter.classList.add(\"completed\");\n      const modal = await ModalFactory.create({\n      title: \"Kurs vollständig bearbeitet\",\n      body: '<p>Du hast alle Lektionen in diesem Kurs bearbeitet!</p><i class=\"bi bi-mortarboard-fill\"></i>',\n      footer:\n        '<button type=\"button\" class=\"mooin4-btn mooin4-btn-special\"' +\n        'data-action=\"hide\">Schließen<i class=\"bi bi-x-circle-fill\"></i></button>',\n      type: Mooin4Modal.TYPE,\n      scrollable: false,\n    });\n    modal.show();\n  }\n}"],"names":["data","window","console","log","show_chapter_modal","document","querySelector","chapter_id","classList","add","footerContent","next_chapter","Url","relativeUrl","id","course_id","section","ModalFactory","create","title","body","footer","type","Mooin4Modal","TYPE","scrollable","show","show_course_modal","addEventListener","event","message","action","showModal","modal"],"mappings":"+kCAqBC,iBAAyBA,qIACnBC,OAAOC,QAAQC,IAAI,yBACpBH,KAAKI,uDACFH,OAAOC,QAAQC,IAAI,2BACDE,SAASC,mCAChBN,KAAKO,kBAEJC,UAAUC,IAAI,aAC3BC,cAAgB,GAEjBA,cADCV,KAAKW,aAAe,EAEpB,sIAIA,+IAGAC,aAAIC,YAAY,mBAAoB,CAClCC,GAAId,KAAKe,UACTC,QAAShB,KAAKW,eAEhB,+EAEkBM,uBAAaC,OAAO,CACxCC,MAAO,iCACPC,KAAM,gGACNC,OAAQX,cACRY,KAAMC,qBAAYC,KAClBC,YAAY,yBAERC,mBAEJ1B,KAAK2B,iDACgBtB,SAASC,mCAChBN,KAAKO,kBAEJC,UAAUC,IAAI,8BACTQ,uBAAaC,OAAO,CACxCC,MAAO,8BACPC,KAAM,iGACNC,OACE,sIAEFC,KAAMC,qBAAYC,KAClBC,YAAY,0BAERC,0GA7DU,WAClBzB,OAAO2B,iBAAiB,WAAW,SAASC,WACtCC,QAAUD,MAAM7B,KACG,cAAnB8B,QAAQC,wDACVC,CAAUF,QAAQG,MAAMjC,WACnBC,OAAOC,QAAQC,IAAI2B,QAAQG"}